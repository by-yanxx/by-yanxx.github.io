---
title: Java 并发_Java 中所有的锁
date: 2023-03-01
tags: 并发
categories: JavaSE
toc: true
hide: false
sticky: 0
---

{% note blue 'fas fa-bullhorn' %}
内容包括：
1. 所有的锁种类
2. 它们间的对比
{% endnote %}

---

# 总览

![](../pictures/Pasted%20image%2020230301142247.png)

# 乐观锁 vs 悲观锁

`悲观锁`：对同一数据进行并发操作时，悲观地认为自己在使用数据时一定会有其他线程来修改数据，所以获取数据时加锁，以保证其他线程不会修改该数据。如：`synchronized` 和 `Lock` 就是悲观锁。

`乐观锁`：乐观地认为自己在使用数据时不会有其他线程修改数据，所以不添加锁，只是在更新数据之前先判断一下该数据是否已经被其他线程修改了。如果没有数据被修改过，则成功写入；如果数据被其他线程修改过，则根据不同的实现方式执行不同的操作（报错、自旋、……）。如：CAS 算法（Java 原子类中的递增操作就是通过 CAS 自旋实现的）

- 悲观锁更适合写操作多的场景
- 乐观锁更适合读操作多的场景

# 自旋锁 vs 适应性自旋锁

